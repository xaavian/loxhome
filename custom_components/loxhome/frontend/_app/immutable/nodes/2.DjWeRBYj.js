import{d as Ze,s as fe,b as $,a as R,f as Y,c as ct}from"../chunks/B-qeOuba.js";import{b as On,i as Pn,aP as Nn,h as kt,aG as Mn,aH as Jt,t as en,o as tn,g as Fn,ay as jn,a0 as Ke,X as Lt,z as l,B as ae,a4 as b,a5 as m,a6 as A,a2 as be,a3 as Qe,ab as L,aa as Fe,a1 as Pe,aQ as zn,e as Rn,aR as Bn,as as Xn}from"../chunks/9vQHtRAg.js";import{s as Je,a as Se,i as se}from"../chunks/DCr_4wqs.js";import{M as de,r as qn,s as Wt,a as vn,b as Hn,c as ze,d as ut,e as hn,f as $t,t as Yn,m as Gn,g as Ce,h as qe,i as pt,j as Ln,k as Wn,l as $n,n as Ve,o as Vn,D as Bt,p as Un,q as nn}from"../chunks/BMNB3euX.js";import{b as Zn}from"../chunks/f3JrtVye.js";function Kn(i,e){let t=null,n=kt;var a;if(kt){t=Fn;for(var r=jn(document.head);r!==null&&(r.nodeType!==Mn||r.data!==i);)r=Jt(r);if(r===null)en(!1);else{var o=Jt(r);r.remove(),tn(o)}}kt||(a=document.head.appendChild(On()));try{Pn(()=>e(a),Nn)}finally{n&&(en(!0),tn(t))}}var Qn=Y('<div class="dimmer-overlay svelte-1fmka7l"><div class="dimmer-card svelte-1fmka7l"><div class="dimmer-header svelte-1fmka7l"><span class="dimmer-name svelte-1fmka7l"> </span> <span class="dimmer-pct svelte-1fmka7l"> </span> <button><div class="toggle-knob svelte-1fmka7l"></div></button></div> <div class="dimmer-slider-row svelte-1fmka7l"><!> <div class="slider-container svelte-1fmka7l"><input type="range" min="0" max="100" class="dimmer-range svelte-1fmka7l"/></div> <!></div></div></div>');function Jn(i,e){Ke(e,!0);const t=()=>Se(hn,"$entityStates",n),[n,a]=Je();let r=L(()=>t()[e.entityId]),o=L(()=>l(r)?!["off","unavailable","unknown"].includes(l(r).state):!1),s=L(()=>l(r)?.attributes?.brightness?Math.round(l(r).attributes.brightness/255*100):0),d=L(()=>l(r)?.attributes?.friendly_name||e.entityId.split(".")[1]?.replace(/_/g," ")||e.entityId),c=Fe(!1),f=Fe(0);Lt(()=>{l(c)||ae(f,l(s),!0)});function h(k){const E=k.target;ae(f,parseInt(E.value),!0)}function S(k){const E=k.target,F=parseInt(E.value);ae(c,!1),F===0?ut("light","turn_off",{},{entity_id:e.entityId}):ut("light","turn_on",{brightness_pct:F},{entity_id:e.entityId})}function w(){l(o)?ut("light","turn_off",{},{entity_id:e.entityId}):ut("light","turn_on",{},{entity_id:e.entityId})}var v=Qn(),p=b(v),D=b(p),M=b(D),O=b(M,!0);m(M);var j=A(M,2),q=b(j);m(j);var H=A(j,2);let W;m(D);var y=A(D,2),N=b(y);de(N,{name:"mdi:brightness-5",size:18,color:"var(--text-muted)"});var I=A(N,2),g=b(I);qn(g),m(I);var _=A(I,2);de(_,{name:"mdi:brightness-7",size:22,color:"var(--text-secondary)"}),m(y),m(p),m(v),be(()=>{fe(O,l(d)),fe(q,`${l(f)??""} %`),W=Wt(H,1,"dimmer-toggle svelte-1fmka7l",null,W,{on:l(o)}),vn(H,"aria-label",l(o)?"Ausschalten":"Einschalten"),Hn(g,l(f)),ze(g,`--pct: ${l(f)??""}%`)}),$("click",v,function(...k){e.onClose?.apply(this,k)}),$("keydown",v,()=>{}),$("click",p,k=>k.stopPropagation()),$("keydown",p,()=>{}),$("click",H,w),$("input",g,h),$("change",g,S),$("pointerdown",g,()=>ae(c,!0)),R(i,v),Qe(),a()}Ze(["click","keydown","input","change","pointerdown"]);var ei=Y('<button class="remove-btn svelte-4lsiak" title="Remove tile"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M18 6L6 18M6 6l12 12"></path></svg></button>'),ti=Y('<span class="zone-label svelte-4lsiak"> </span>'),ni=Y('<div class="tile-actions svelte-4lsiak"><!> <!></div>'),ii=Y('<div class="tile-actions svelte-4lsiak"><!></div>'),ai=Y('<div class="tile-actions svelte-4lsiak"><!></div>'),ri=Y('<div role="button" tabindex="0"><!> <!> <div class="tile-icon svelte-4lsiak"><!></div> <div class="tile-content svelte-4lsiak"><span class="tile-state svelte-4lsiak"> </span> <span class="tile-name svelte-4lsiak"> </span></div> <!></div> <!>',1);function mt(i,e){Ke(e,!0);const t=()=>Se(hn,"$entityStates",a),n=()=>Se($t,"$editMode",a),[a,r]=Je();let o=Fe(!1),s=L(()=>t()[e.tile.entityId]),d=L(()=>l(s)?!["off","unavailable","unknown","idle"].includes(l(s).state):!1),c=L(()=>e.tile.entityId.split(".")[0]),f=L(()=>e.tile.name||l(s)?.attributes?.friendly_name||e.tile.entityId.split(".")[1]?.replace(/_/g," ")||e.tile.entityId),h=L(w),S=L(()=>e.tile.color||v());function w(){if(!l(s))return"Unavailable";const T=l(s).state;switch(l(c)){case"light":if(l(d)){if(e.tile.dimmable){const He=l(s).attributes?.brightness;return He?`${Math.round(He/255*100)}%`:"An"}return"An"}return"Aus";case"climate":const z=l(s).attributes?.current_temperature,U=l(s).attributes?.hvac_action||T;return z?`${z}°`:String(U).charAt(0).toUpperCase()+String(U).slice(1);case"sensor":const Q=l(s).attributes?.unit_of_measurement||"";return`${T} ${Q}`.trim();case"cover":const we=l(s).attributes?.current_position;return T==="closed"?"Geschlossen":we!==void 0?`${we}%`:T.charAt(0).toUpperCase()+T.slice(1);case"media_player":if(T==="playing"){const He=l(s).attributes?.media_title;return"Wiedergabe"}return T.charAt(0).toUpperCase()+T.slice(1);case"lock":return T==="locked"?"Gesperrt":"Entriegelt";case"alarm_control_panel":return T==="armed_away"||T==="armed_home"?"Gesperrt":"Alles OK";default:return T.charAt(0).toUpperCase()+T.slice(1)}}function v(){if(!l(s)||l(s).state==="unavailable")return"var(--text-muted)";switch(l(c)){case"light":return l(d)?"var(--cat-lighting)":"var(--text-secondary)";case"climate":return"var(--cat-climate)";case"cover":return l(d)?"var(--text-primary)":"var(--cat-ok)";case"media_player":return l(d)?"var(--cat-media)":"var(--text-secondary)";case"sensor":return"var(--text-primary)";case"lock":case"alarm_control_panel":return l(s).state==="locked"||l(s).state==="armed_away"?"var(--cat-security)":"var(--cat-ok)";case"switch":case"input_boolean":return l(d)?"var(--cat-switches)":"var(--text-secondary)";default:return l(d)?"var(--accent)":"var(--text-secondary)"}}function p(){n()||(["light","switch","fan","input_boolean","automation","lock"].includes(l(c))?Yn(e.tile.entityId):Gn.set(e.tile.entityId))}let D=L(()=>e.tile.size||"1x1"),M=L(()=>parseInt(l(D).split("x")[0])),O=L(()=>parseInt(l(D).split("x")[1]));function j(T){return{light:"mdi:lightbulb-outline",switch:"mdi:flash",input_boolean:"mdi:flash",climate:"mdi:thermometer",cover:"mdi:window-shutter",media_player:"mdi:music",sensor:"mdi:chart-line",lock:"mdi:lock",alarm_control_panel:"mdi:shield-check",camera:"mdi:camera",fan:"mdi:fan",automation:"mdi:robot"}[T]||"mdi:circle-outline"}var q=ri(),H=Pe(q);let W;var y=b(H);{var N=T=>{var z=ei();$("click",z,U=>{U.stopPropagation(),e.onRemove?.()}),R(T,z)};se(y,T=>{n()&&e.onRemove&&T(N)})}var I=A(y,2);{var g=T=>{var z=ti(),U=b(z,!0);m(z),be(()=>fe(U,e.zoneName)),R(T,z)};se(I,T=>{e.zoneName&&!n()&&T(g)})}var _=A(I,2),k=b(_);{let T=L(()=>e.tile.icon||j(l(c)));de(k,{get name(){return l(T)},size:36})}m(_);var E=A(_,2),F=b(E),G=b(F,!0);m(F);var V=A(F,2),te=b(V,!0);m(V),m(E);var ee=A(E,2);{var oe=T=>{var z=ni(),U=b(z);de(U,{name:"mdi:chevron-up",size:16});var Q=A(U,2);de(Q,{name:"mdi:chevron-down",size:16}),m(z),R(T,z)},_e=T=>{var z=ii(),U=b(z);de(U,{name:"mdi:pause",size:16}),m(z),R(T,z)},le=T=>{var z=ai(),U=b(z);de(U,{name:"mdi:plus",size:16}),m(z),$("click",z,Q=>{Q.stopPropagation(),ae(o,!0)}),$("keydown",z,()=>{}),R(T,z)};se(ee,T=>{l(c)==="cover"&&!n()?T(oe):l(c)==="media_player"&&l(d)&&!n()?T(_e,1):l(c)==="light"&&l(d)&&!n()&&T(le,2)})}m(H);var ne=A(H,2);{var ye=T=>{Jn(T,{get entityId(){return e.tile.entityId},onClose:()=>ae(o,!1)})};se(ne,T=>{l(o)&&T(ye)})}be(()=>{W=Wt(H,1,"tile svelte-4lsiak",null,W,{on:l(d),editing:n()}),ze(H,`grid-column: span ${l(M)??""}; grid-row: span ${l(O)??""};`),vn(H,"aria-label",l(f)),ze(_,`color: ${l(S)??""}`),ze(F,`color: ${l(S)??""}`),fe(G,l(h)),fe(te,l(f))}),$("click",H,p),$("keydown",H,T=>{(T.key==="Enter"||T.key===" ")&&p()}),R(i,q),Qe(),r()}Ze(["click","keydown"]);function oi(i,e,t){return(e=ci(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ae(){return Ae=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ae.apply(null,arguments)}function an(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,n)}return t}function Ie(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?an(Object(t),!0).forEach(function(n){oi(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function li(i,e){if(i==null)return{};var t,n,a=si(i,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(n=0;n<r.length;n++)t=r[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(a[t]=i[t])}return a}function si(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function di(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function ci(i){var e=di(i,"string");return typeof e=="symbol"?e:e+""}function Xt(i){"@babel/helpers - typeof";return Xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(i)}var ui="1.15.7";function ke(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var Oe=ke(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),st=ke(/Edge/i),rn=ke(/firefox/i),it=ke(/safari/i)&&!ke(/chrome/i)&&!ke(/android/i),Vt=ke(/iP(ad|od|hone)/i),gn=ke(/chrome/i)&&ke(/android/i),pn={capture:!1,passive:!1};function X(i,e,t){i.addEventListener(e,t,!Oe&&pn)}function B(i,e,t){i.removeEventListener(e,t,!Oe&&pn)}function Et(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function mn(i){return i.host&&i!==document&&i.host.nodeType&&i.host!==i?i.host:i.parentNode}function Te(i,e,t,n){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&Et(i,e):Et(i,e))||n&&i===t)return i;if(i===t)break}while(i=mn(i))}return null}var on=/\s+/g;function pe(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var n=(" "+i.className+" ").replace(on," ").replace(" "+e+" "," ");i.className=(n+(t?" "+e:"")).replace(on," ")}}function C(i,e,t){var n=i&&i.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function $e(i,e){var t="";if(typeof i=="string")t=i;else do{var n=C(i,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(i=i.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function bn(i,e,t){if(i){var n=i.getElementsByTagName(e),a=0,r=n.length;if(t)for(;a<r;a++)t(n[a],a);return n}return[]}function xe(){var i=document.scrollingElement;return i||document.documentElement}function re(i,e,t,n,a){if(!(!i.getBoundingClientRect&&i!==window)){var r,o,s,d,c,f,h;if(i!==window&&i.parentNode&&i!==xe()?(r=i.getBoundingClientRect(),o=r.top,s=r.left,d=r.bottom,c=r.right,f=r.height,h=r.width):(o=0,s=0,d=window.innerHeight,c=window.innerWidth,f=window.innerHeight,h=window.innerWidth),(e||t)&&i!==window&&(a=a||i.parentNode,!Oe))do if(a&&a.getBoundingClientRect&&(C(a,"transform")!=="none"||t&&C(a,"position")!=="static")){var S=a.getBoundingClientRect();o-=S.top+parseInt(C(a,"border-top-width")),s-=S.left+parseInt(C(a,"border-left-width")),d=o+r.height,c=s+r.width;break}while(a=a.parentNode);if(n&&i!==window){var w=$e(a||i),v=w&&w.a,p=w&&w.d;w&&(o/=p,s/=v,h/=v,f/=p,d=o+f,c=s+h)}return{top:o,left:s,bottom:d,right:c,width:h,height:f}}}function ln(i,e,t){for(var n=je(i,!0),a=re(i)[e];n;){var r=re(n)[t],o=void 0;if(o=a>=r,!o)return n;if(n===xe())break;n=je(n,!1)}return!1}function Ue(i,e,t,n){for(var a=0,r=0,o=i.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==x.ghost&&(n||o[r]!==x.dragged)&&Te(o[r],t.draggable,i,!1)){if(a===e)return o[r];a++}r++}return null}function Ut(i,e){for(var t=i.lastElementChild;t&&(t===x.ghost||C(t,"display")==="none"||e&&!Et(t,e));)t=t.previousElementSibling;return t||null}function Ee(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==x.clone&&(!e||Et(i,e))&&t++;return t}function sn(i){var e=0,t=0,n=xe();if(i)do{var a=$e(i),r=a.a,o=a.d;e+=i.scrollLeft*r,t+=i.scrollTop*o}while(i!==n&&(i=i.parentNode));return[e,t]}function fi(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===i[t][n])return Number(t)}return-1}function je(i,e){if(!i||!i.getBoundingClientRect)return xe();var t=i,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=C(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return xe();if(n||e)return t;n=!0}}while(t=t.parentNode);return xe()}function vi(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function At(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var at;function _n(i,e){return function(){if(!at){var t=arguments,n=this;t.length===1?i.call(n,t[0]):i.apply(n,t),at=setTimeout(function(){at=void 0},e)}}}function hi(){clearTimeout(at),at=void 0}function yn(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function wn(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function En(i,e,t){var n={};return Array.from(i.children).forEach(function(a){var r,o,s,d;if(!(!Te(a,e.draggable,i,!1)||a.animated||a===t)){var c=re(a);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,c.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,c.top),n.right=Math.max((s=n.right)!==null&&s!==void 0?s:-1/0,c.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ge="Sortable"+new Date().getTime();function gi(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(C(a,"display")==="none"||a===x.ghost)){i.push({target:a,rect:re(a)});var r=Ie({},i[i.length-1].rect);if(a.thisAnimationDuration){var o=$e(a,!0);o&&(r.top-=o.f,r.left-=o.e)}a.fromRect=r}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(fi(i,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,o=0;i.forEach(function(s){var d=0,c=s.target,f=c.fromRect,h=re(c),S=c.prevFromRect,w=c.prevToRect,v=s.rect,p=$e(c,!0);p&&(h.top-=p.f,h.left-=p.e),c.toRect=h,c.thisAnimationDuration&&At(S,h)&&!At(f,h)&&(v.top-h.top)/(v.left-h.left)===(f.top-h.top)/(f.left-h.left)&&(d=mi(v,S,w,a.options)),At(h,f)||(c.prevFromRect=f,c.prevToRect=h,d||(d=a.options.animation),a.animate(c,v,h,d)),d&&(r=!0,o=Math.max(o,d),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},d),c.thisAnimationDuration=d)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),i=[]},animate:function(n,a,r,o){if(o){C(n,"transition",""),C(n,"transform","");var s=$e(this.el),d=s&&s.a,c=s&&s.d,f=(a.left-r.left)/(d||1),h=(a.top-r.top)/(c||1);n.animatingX=!!f,n.animatingY=!!h,C(n,"transform","translate3d("+f+"px,"+h+"px,0)"),this.forRepaintDummy=pi(n),C(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),C(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){C(n,"transition",""),C(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function pi(i){return i.offsetWidth}function mi(i,e,t,n){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Ye=[],Ot={initializeByDefault:!0},dt={mount:function(e){for(var t in Ot)Ot.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ot[t]);Ye.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ye.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var r=e+"Global";Ye.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](Ie({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Ie({sortable:t},n)))})},initializePlugins:function(e,t,n,a){Ye.forEach(function(s){var d=s.pluginName;if(!(!e.options[d]&&!s.initializeByDefault)){var c=new s(e,t,e.options);c.sortable=e,c.options=e.options,e[d]=c,Ae(n,c.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return Ye.forEach(function(a){typeof a.eventProperties=="function"&&Ae(n,a.eventProperties.call(t[a.pluginName],e))}),n},modifyOption:function(e,t,n){var a;return Ye.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(a=r.optionListeners[t].call(e[r.pluginName],n))}),a}};function bi(i){var e=i.sortable,t=i.rootEl,n=i.name,a=i.targetEl,r=i.cloneEl,o=i.toEl,s=i.fromEl,d=i.oldIndex,c=i.newIndex,f=i.oldDraggableIndex,h=i.newDraggableIndex,S=i.originalEvent,w=i.putSortable,v=i.extraEventProperties;if(e=e||t&&t[ge],!!e){var p,D=e.options,M="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Oe&&!st?p=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(n,!0,!0)),p.to=o||t,p.from=s||t,p.item=a||t,p.clone=r,p.oldIndex=d,p.newIndex=c,p.oldDraggableIndex=f,p.newDraggableIndex=h,p.originalEvent=S,p.pullMode=w?w.lastPutMode:void 0;var O=Ie(Ie({},v),dt.getEventProperties(n,e));for(var j in O)p[j]=O[j];t&&t.dispatchEvent(p),D[M]&&D[M].call(e,p)}}var _i=["evt"],he=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,r=li(n,_i);dt.pluginEvent.bind(x)(e,t,Ie({dragEl:u,parentEl:J,ghostEl:P,rootEl:Z,nextEl:Xe,lastDownEl:bt,cloneEl:K,cloneHidden:Me,dragStarted:et,putSortable:ce,activeSortable:x.active,originalEvent:a,oldIndex:We,oldDraggableIndex:rt,newIndex:me,newDraggableIndex:Ne,hideGhostForTarget:Cn,unhideGhostForTarget:xn,cloneNowHidden:function(){Me=!0},cloneNowShown:function(){Me=!1},dispatchSortableEvent:function(s){ve({sortable:t,name:s,originalEvent:a})}},r))};function ve(i){bi(Ie({putSortable:ce,cloneEl:K,targetEl:u,rootEl:Z,oldIndex:We,oldDraggableIndex:rt,newIndex:me,newDraggableIndex:Ne},i))}var u,J,P,Z,Xe,bt,K,Me,We,me,rt,Ne,ft,ce,Le=!1,St=!1,Dt=[],Re,De,Pt,Nt,dn,cn,et,Ge,ot,lt=!1,vt=!1,_t,ue,Mt=[],qt=!1,Tt=[],xt=typeof document<"u",ht=Vt,un=st||Oe?"cssFloat":"float",yi=xt&&!gn&&!Vt&&"draggable"in document.createElement("div"),Sn=(function(){if(xt){if(Oe)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}})(),Dn=function(e,t){var n=C(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Ue(e,0,t),o=Ue(e,1,t),s=r&&C(r),d=o&&C(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(r).width,f=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+re(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var h=s.float==="left"?"left":"right";return o&&(d.clear==="both"||d.clear===h)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&n[un]==="none"||o&&n[un]==="none"&&c+f>a)?"vertical":"horizontal"},wi=function(e,t,n){var a=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,s=n?t.left:t.top,d=n?t.right:t.bottom,c=n?t.width:t.height;return a===s||r===d||a+o/2===s+c/2},Ei=function(e,t){var n;return Dt.some(function(a){var r=a[ge].options.emptyInsertThreshold;if(!(!r||Ut(a))){var o=re(a),s=e>=o.left-r&&e<=o.right+r,d=t>=o.top-r&&t<=o.bottom+r;if(s&&d)return n=a}}),n},Tn=function(e){function t(r,o){return function(s,d,c,f){var h=s.options.group.name&&d.options.group.name&&s.options.group.name===d.options.group.name;if(r==null&&(o||h))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return t(r(s,d,c,f),o)(s,d,c,f);var S=(o?s:d).options.group.name;return r===!0||typeof r=="string"&&r===S||r.join&&r.indexOf(S)>-1}}var n={},a=e.group;(!a||Xt(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Cn=function(){!Sn&&P&&C(P,"display","none")},xn=function(){!Sn&&P&&C(P,"display","")};xt&&!gn&&document.addEventListener("click",function(i){if(St)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),St=!1,!1},!0);var Be=function(e){if(u){e=e.touches?e.touches[0]:e;var t=Ei(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ge]._onDragOver(n)}}},Si=function(e){u&&u.parentNode[ge]._isOutsideThisEl(e.target)};function x(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=Ae({},e),i[ge]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Dn(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:x.supportPointer!==!1&&"PointerEvent"in window&&(!it||Vt),emptyInsertThreshold:5};dt.initializePlugins(this,i,t);for(var n in t)!(n in e)&&(e[n]=t[n]);Tn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:yi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?X(i,"pointerdown",this._onTapStart):(X(i,"mousedown",this._onTapStart),X(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(X(i,"dragover",this),X(i,"dragenter",this)),Dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ae(this,gi())}x.prototype={constructor:x,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ge=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,u):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,r=a.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,f=a.filter;if(Oi(n),!u&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&it&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Te(d,a.draggable,n,!1),!(d&&d.animated)&&bt!==d)){if(We=Ee(d),rt=Ee(d,a.draggable),typeof f=="function"){if(f.call(this,e,d,this)){ve({sortable:t,rootEl:c,name:"filter",targetEl:d,toEl:n,fromEl:n}),he("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(h){if(h=Te(c,h.trim(),n,!1),h)return ve({sortable:t,rootEl:h,name:"filter",targetEl:d,fromEl:n,toEl:n}),he("filter",t,{evt:e}),!0}),f)){r&&e.preventDefault();return}a.handle&&!Te(c,a.handle,n,!1)||this._prepareDragStart(e,s,d)}}},_prepareDragStart:function(e,t,n){var a=this,r=a.el,o=a.options,s=r.ownerDocument,d;if(n&&!u&&n.parentNode===r){var c=re(n);if(Z=r,u=n,J=u.parentNode,Xe=u.nextSibling,bt=n,ft=o.group,x.dragged=u,Re={target:u,clientX:(t||e).clientX,clientY:(t||e).clientY},dn=Re.clientX-c.left,cn=Re.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,u.style["will-change"]="all",d=function(){if(he("delayEnded",a,{evt:e}),x.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!rn&&a.nativeDraggable&&(u.draggable=!0),a._triggerDragStart(e,t),ve({sortable:a,name:"choose",originalEvent:e}),pe(u,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){bn(u,f.trim(),Ft)}),X(s,"dragover",Be),X(s,"mousemove",Be),X(s,"touchmove",Be),o.supportPointer?(X(s,"pointerup",a._onDrop),!this.nativeDraggable&&X(s,"pointercancel",a._onDrop)):(X(s,"mouseup",a._onDrop),X(s,"touchend",a._onDrop),X(s,"touchcancel",a._onDrop)),rn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(st||Oe))){if(x.eventCanceled){this._onDrop();return}o.supportPointer?(X(s,"pointerup",a._disableDelayedDrag),X(s,"pointercancel",a._disableDelayedDrag)):(X(s,"mouseup",a._disableDelayedDrag),X(s,"touchend",a._disableDelayedDrag),X(s,"touchcancel",a._disableDelayedDrag)),X(s,"mousemove",a._delayedDragTouchMoveHandler),X(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&X(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(d,o.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&Ft(u),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._disableDelayedDrag),B(e,"touchend",this._disableDelayedDrag),B(e,"touchcancel",this._disableDelayedDrag),B(e,"pointerup",this._disableDelayedDrag),B(e,"pointercancel",this._disableDelayedDrag),B(e,"mousemove",this._delayedDragTouchMoveHandler),B(e,"touchmove",this._delayedDragTouchMoveHandler),B(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?X(document,"pointermove",this._onTouchMove):t?X(document,"touchmove",this._onTouchMove):X(document,"mousemove",this._onTouchMove):(X(u,"dragend",this),X(Z,"dragstart",this._onDragStart));try{document.selection?yt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Le=!1,Z&&u){he("dragStarted",this,{evt:t}),this.nativeDraggable&&X(document,"dragover",Si);var n=this.options;!e&&pe(u,n.dragClass,!1),pe(u,n.ghostClass,!0),x.active=this,e&&this._appendGhost(),ve({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(De){this._lastX=De.clientX,this._lastY=De.clientY,Cn();for(var e=document.elementFromPoint(De.clientX,De.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(De.clientX,De.clientY),e!==t);)t=e;if(u.parentNode[ge]._isOutsideThisEl(e),t)do{if(t[ge]){var n=void 0;if(n=t[ge]._onDragOver({clientX:De.clientX,clientY:De.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=mn(t));xn()}},_onTouchMove:function(e){if(Re){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=P&&$e(P,!0),s=P&&o&&o.a,d=P&&o&&o.d,c=ht&&ue&&sn(ue),f=(r.clientX-Re.clientX+a.x)/(s||1)+(c?c[0]-Mt[0]:0)/(s||1),h=(r.clientY-Re.clientY+a.y)/(d||1)+(c?c[1]-Mt[1]:0)/(d||1);if(!x.active&&!Le){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(P){o?(o.e+=f-(Pt||0),o.f+=h-(Nt||0)):o={a:1,b:0,c:0,d:1,e:f,f:h};var S="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");C(P,"webkitTransform",S),C(P,"mozTransform",S),C(P,"msTransform",S),C(P,"transform",S),Pt=f,Nt=h,De=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!P){var e=this.options.fallbackOnBody?document.body:Z,t=re(u,!0,ht,!0,e),n=this.options;if(ht){for(ue=e;C(ue,"position")==="static"&&C(ue,"transform")==="none"&&ue!==document;)ue=ue.parentNode;ue!==document.body&&ue!==document.documentElement?(ue===document&&(ue=xe()),t.top+=ue.scrollTop,t.left+=ue.scrollLeft):ue=xe(),Mt=sn(ue)}P=u.cloneNode(!0),pe(P,n.ghostClass,!1),pe(P,n.fallbackClass,!0),pe(P,n.dragClass,!0),C(P,"transition",""),C(P,"transform",""),C(P,"box-sizing","border-box"),C(P,"margin",0),C(P,"top",t.top),C(P,"left",t.left),C(P,"width",t.width),C(P,"height",t.height),C(P,"opacity","0.8"),C(P,"position",ht?"absolute":"fixed"),C(P,"zIndex","100000"),C(P,"pointerEvents","none"),x.ghost=P,e.appendChild(P),C(P,"transform-origin",dn/parseInt(P.style.width)*100+"% "+cn/parseInt(P.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,r=n.options;if(he("dragStart",this,{evt:e}),x.eventCanceled){this._onDrop();return}he("setupClone",this),x.eventCanceled||(K=wn(u),K.removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),pe(K,this.options.chosenClass,!1),x.clone=K),n.cloneId=yt(function(){he("clone",n),!x.eventCanceled&&(n.options.removeCloneOnHide||Z.insertBefore(K,u),n._hideClone(),ve({sortable:n,name:"clone"}))}),!t&&pe(u,r.dragClass,!0),t?(St=!0,n._loopId=setInterval(n._emulateDragOver,50)):(B(document,"mouseup",n._onDrop),B(document,"touchend",n._onDrop),B(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(n,a,u)),X(document,"drop",n),C(u,"transform","translateZ(0)")),Le=!0,n._dragStartId=yt(n._dragStarted.bind(n,t,e)),X(document,"selectstart",n),et=!0,window.getSelection().removeAllRanges(),it&&C(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,a,r,o,s=this.options,d=s.group,c=x.active,f=ft===d,h=s.sort,S=ce||c,w,v=this,p=!1;if(qt)return;function D(ee,oe){he(ee,v,Ie({evt:e,isOwner:f,axis:w?"vertical":"horizontal",revert:o,dragRect:a,targetRect:r,canSort:h,fromSortable:S,target:n,completed:O,onMove:function(le,ne){return gt(Z,t,u,a,le,re(le),e,ne)},changed:j},oe))}function M(){D("dragOverAnimationCapture"),v.captureAnimationState(),v!==S&&S.captureAnimationState()}function O(ee){return D("dragOverCompleted",{insertion:ee}),ee&&(f?c._hideClone():c._showClone(v),v!==S&&(pe(u,ce?ce.options.ghostClass:c.options.ghostClass,!1),pe(u,s.ghostClass,!0)),ce!==v&&v!==x.active?ce=v:v===x.active&&ce&&(ce=null),S===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){D("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==S&&(S.animateAll(),S._ignoreWhileAnimating=null)),(n===u&&!u.animated||n===t&&!n.animated)&&(Ge=null),!s.dragoverBubble&&!e.rootEl&&n!==document&&(u.parentNode[ge]._isOutsideThisEl(e.target),!ee&&Be(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function j(){me=Ee(u),Ne=Ee(u,s.draggable),ve({sortable:v,name:"change",toEl:t,newIndex:me,newDraggableIndex:Ne,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Te(n,s.draggable,t,!0),D("dragOver"),x.eventCanceled)return p;if(u.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return O(!1);if(St=!1,c&&!s.disabled&&(f?h||(o=J!==Z):ce===this||(this.lastPutMode=ft.checkPull(this,c,u,e))&&d.checkPut(this,c,u,e))){if(w=this._getDirection(e,n)==="vertical",a=re(u),D("dragOverValid"),x.eventCanceled)return p;if(o)return J=Z,M(),this._hideClone(),D("revert"),x.eventCanceled||(Xe?Z.insertBefore(u,Xe):Z.appendChild(u)),O(!0);var q=Ut(t,s.draggable);if(!q||xi(e,w,this)&&!q.animated){if(q===u)return O(!1);if(q&&t===e.target&&(n=q),n&&(r=re(n)),gt(Z,t,u,a,n,r,e,!!n)!==!1)return M(),q&&q.nextSibling?t.insertBefore(u,q.nextSibling):t.appendChild(u),J=t,j(),O(!0)}else if(q&&Ci(e,w,this)){var H=Ue(t,0,s,!0);if(H===u)return O(!1);if(n=H,r=re(n),gt(Z,t,u,a,n,r,e,!1)!==!1)return M(),t.insertBefore(u,H),J=t,j(),O(!0)}else if(n.parentNode===t){r=re(n);var W=0,y,N=u.parentNode!==t,I=!wi(u.animated&&u.toRect||a,n.animated&&n.toRect||r,w),g=w?"top":"left",_=ln(n,"top","top")||ln(u,"top","top"),k=_?_.scrollTop:void 0;Ge!==n&&(y=r[g],lt=!1,vt=!I&&s.invertSwap||N),W=Ii(e,n,r,w,I?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,vt,Ge===n);var E;if(W!==0){var F=Ee(u);do F-=W,E=J.children[F];while(E&&(C(E,"display")==="none"||E===P))}if(W===0||E===n)return O(!1);Ge=n,ot=W;var G=n.nextElementSibling,V=!1;V=W===1;var te=gt(Z,t,u,a,n,r,e,V);if(te!==!1)return(te===1||te===-1)&&(V=te===1),qt=!0,setTimeout(Ti,30),M(),V&&!G?t.appendChild(u):n.parentNode.insertBefore(u,V?G:n),_&&yn(_,0,k-_.scrollTop),J=u.parentNode,y!==void 0&&!vt&&(_t=Math.abs(y-re(n)[g])),j(),O(!0)}if(t.contains(u))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove),B(document,"touchmove",this._onTouchMove),B(document,"pointermove",this._onTouchMove),B(document,"dragover",Be),B(document,"mousemove",Be),B(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._onDrop),B(e,"touchend",this._onDrop),B(e,"pointerup",this._onDrop),B(e,"pointercancel",this._onDrop),B(e,"touchcancel",this._onDrop),B(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(me=Ee(u),Ne=Ee(u,n.draggable),he("drop",this,{evt:e}),J=u&&u.parentNode,me=Ee(u),Ne=Ee(u,n.draggable),x.eventCanceled){this._nulling();return}Le=!1,vt=!1,lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),it&&C(document.body,"user-select",""),C(u,"transform",""),e&&(et&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),P&&P.parentNode&&P.parentNode.removeChild(P),(Z===J||ce&&ce.lastPutMode!=="clone")&&K&&K.parentNode&&K.parentNode.removeChild(K),u&&(this.nativeDraggable&&B(u,"dragend",this),Ft(u),u.style["will-change"]="",et&&!Le&&pe(u,ce?ce.options.ghostClass:this.options.ghostClass,!1),pe(u,this.options.chosenClass,!1),ve({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==J?(me>=0&&(ve({rootEl:J,name:"add",toEl:J,fromEl:Z,originalEvent:e}),ve({sortable:this,name:"remove",toEl:J,originalEvent:e}),ve({rootEl:J,name:"sort",toEl:J,fromEl:Z,originalEvent:e}),ve({sortable:this,name:"sort",toEl:J,originalEvent:e})),ce&&ce.save()):me!==We&&me>=0&&(ve({sortable:this,name:"update",toEl:J,originalEvent:e}),ve({sortable:this,name:"sort",toEl:J,originalEvent:e})),x.active&&((me==null||me===-1)&&(me=We,Ne=rt),ve({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),Z=u=J=P=Xe=K=bt=Me=Re=De=et=me=Ne=We=rt=Ge=ot=ce=ft=x.dragged=x.ghost=x.clone=x.active=null;var e=this.el;Tt.forEach(function(t){e.contains(t)&&(t.checked=!0)}),Tt.length=Pt=Nt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":u&&(this._onDragOver(e),Di(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,a=0,r=n.length,o=this.options;a<r;a++)t=n[a],Te(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Ai(t));return e},sort:function(e,t){var n={},a=this.el;this.toArray().forEach(function(r,o){var s=a.children[o];Te(s,this.options.draggable,a,!1)&&(n[r]=s)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(a.removeChild(n[r]),a.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Te(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var a=dt.modifyOption(this,e,t);typeof a<"u"?n[e]=a:n[e]=t,e==="group"&&Tn(n)},destroy:function(){he("destroy",this);var e=this.el;e[ge]=null,B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart),B(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Dt.splice(Dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Me){if(he("hideClone",this),x.eventCanceled)return;C(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),Me=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Me){if(he("showClone",this),x.eventCanceled)return;u.parentNode==Z&&!this.options.group.revertClone?Z.insertBefore(K,u):Xe?Z.insertBefore(K,Xe):Z.appendChild(K),this.options.group.revertClone&&this.animate(u,K),C(K,"display",""),Me=!1}}};function Di(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function gt(i,e,t,n,a,r,o,s){var d,c=i[ge],f=c.options.onMove,h;return window.CustomEvent&&!Oe&&!st?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=i,d.dragged=t,d.draggedRect=n,d.related=a||e,d.relatedRect=r||re(e),d.willInsertAfter=s,d.originalEvent=o,i.dispatchEvent(d),f&&(h=f.call(c,d,o)),h}function Ft(i){i.draggable=!1}function Ti(){qt=!1}function Ci(i,e,t){var n=re(Ue(t.el,0,t.options,!0)),a=En(t.el,t.options,P),r=10;return e?i.clientX<a.left-r||i.clientY<n.top&&i.clientX<n.right:i.clientY<a.top-r||i.clientY<n.bottom&&i.clientX<n.left}function xi(i,e,t){var n=re(Ut(t.el,t.options.draggable)),a=En(t.el,t.options,P),r=10;return e?i.clientX>a.right+r||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>a.bottom+r||i.clientX>n.right&&i.clientY>n.top}function Ii(i,e,t,n,a,r,o,s){var d=n?i.clientY:i.clientX,c=n?t.height:t.width,f=n?t.top:t.left,h=n?t.bottom:t.right,S=!1;if(!o){if(s&&_t<c*a){if(!lt&&(ot===1?d>f+c*r/2:d<h-c*r/2)&&(lt=!0),lt)S=!0;else if(ot===1?d<f+_t:d>h-_t)return-ot}else if(d>f+c*(1-a)/2&&d<h-c*(1-a)/2)return ki(e)}return S=S||o,S&&(d<f+c*r/2||d>h-c*r/2)?d>f+c/2?1:-1:0}function ki(i){return Ee(u)<Ee(i)?1:-1}function Ai(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Oi(i){Tt.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Tt.push(n)}}function yt(i){return setTimeout(i,0)}function Ht(i){return clearTimeout(i)}xt&&X(document,"touchmove",function(i){(x.active||Le)&&i.cancelable&&i.preventDefault()});x.utils={on:X,off:B,css:C,find:bn,is:function(e,t){return!!Te(e,t,e,!1)},extend:vi,throttle:_n,closest:Te,toggleClass:pe,clone:wn,index:Ee,nextTick:yt,cancelNextTick:Ht,detectDirection:Dn,getChild:Ue,expando:ge};x.get=function(i){return i[ge]};x.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(x.utils=Ie(Ie({},x.utils),n.utils)),dt.mount(n)})};x.create=function(i,e){return new x(i,e)};x.version=ui;var ie=[],tt,Yt,Gt=!1,jt,zt,Ct,nt;function Pi(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):this.options.supportPointer?X(document,"pointermove",this._handleFallbackAutoScroll):n.touches?X(document,"touchmove",this._handleFallbackAutoScroll):X(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,"mousemove",this._handleFallbackAutoScroll)),fn(),wt(),hi()},nulling:function(){Ct=Yt=tt=Gt=nt=jt=zt=null,ie.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var a=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(r,o);if(Ct=t,n||this.options.forceAutoScrollFallback||st||Oe||it){Rt(t,this.options,s,n);var d=je(s,!0);Gt&&(!nt||r!==jt||o!==zt)&&(nt&&fn(),nt=setInterval(function(){var c=je(document.elementFromPoint(r,o),!0);c!==d&&(d=c,wt()),Rt(t,a.options,c,n)},10),jt=r,zt=o)}else{if(!this.options.bubbleScroll||je(s,!0)===xe()){wt();return}Rt(t,this.options,je(s,!1),!1)}}},Ae(i,{pluginName:"scroll",initializeByDefault:!0})}function wt(){ie.forEach(function(i){clearInterval(i.pid)}),ie=[]}function fn(){clearInterval(nt)}var Rt=_n(function(i,e,t,n){if(e.scroll){var a=(i.touches?i.touches[0]:i).clientX,r=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,d=xe(),c=!1,f;Yt!==t&&(Yt=t,wt(),tt=e.scroll,f=e.scrollFn,tt===!0&&(tt=je(t,!0)));var h=0,S=tt;do{var w=S,v=re(w),p=v.top,D=v.bottom,M=v.left,O=v.right,j=v.width,q=v.height,H=void 0,W=void 0,y=w.scrollWidth,N=w.scrollHeight,I=C(w),g=w.scrollLeft,_=w.scrollTop;w===d?(H=j<y&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),W=q<N&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(H=j<y&&(I.overflowX==="auto"||I.overflowX==="scroll"),W=q<N&&(I.overflowY==="auto"||I.overflowY==="scroll"));var k=H&&(Math.abs(O-a)<=o&&g+j<y)-(Math.abs(M-a)<=o&&!!g),E=W&&(Math.abs(D-r)<=o&&_+q<N)-(Math.abs(p-r)<=o&&!!_);if(!ie[h])for(var F=0;F<=h;F++)ie[F]||(ie[F]={});(ie[h].vx!=k||ie[h].vy!=E||ie[h].el!==w)&&(ie[h].el=w,ie[h].vx=k,ie[h].vy=E,clearInterval(ie[h].pid),(k!=0||E!=0)&&(c=!0,ie[h].pid=setInterval((function(){n&&this.layer===0&&x.active._onTouchMove(Ct);var G=ie[this.layer].vy?ie[this.layer].vy*s:0,V=ie[this.layer].vx?ie[this.layer].vx*s:0;typeof f=="function"&&f.call(x.dragged.parentNode[ge],V,G,i,Ct,ie[this.layer].el)!=="continue"||yn(ie[this.layer].el,V,G)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&S!==d&&(S=je(S,!1)));Gt=c}},30),In=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var c=n||r;s();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(f.clientX,f.clientY);d(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Zt(){}Zt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Ue(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:In};Ae(Zt,{pluginName:"revertOnSpill"});function Kt(){}Kt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:In};Ae(Kt,{pluginName:"removeOnSpill"});x.mount(new Pi);x.mount(Kt,Zt);var Ni=Y('<button class="move-option svelte-4qeep8"> </button>'),Mi=Y('<span class="move-empty svelte-4qeep8">No other rooms</span>'),Fi=Y('<div class="move-menu svelte-4qeep8"><!> <!></div>'),ji=Y('<button class="edit-btn svelte-4qeep8" title="Edit tile"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button> <button class="move-btn svelte-4qeep8" title="Move to room"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3"></path><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg></button> <!>',1),zi=Y('<div class="tile-wrapper svelte-4qeep8"><!> <!></div>'),Ri=Y('<button class="add-tile-btn svelte-4qeep8"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12h14"></path></svg> <span>Add Tile</span></button>'),Bi=Y('<div class="empty-state svelte-4qeep8"><div class="empty-icon svelte-4qeep8"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="7" height="7" rx="1.5"></rect><rect x="14" y="3" width="7" height="7" rx="1.5"></rect><rect x="3" y="14" width="7" height="7" rx="1.5"></rect><rect x="14" y="14" width="7" height="7" rx="1.5"></rect></svg></div> <p class="svelte-4qeep8">Tap the grid icon to start adding tiles</p></div>'),Xi=Y("<div><!> <!> <!></div>");function qi(i,e){Ke(e,!0);const t=()=>Se(Wn,"$activeView",r),n=()=>Se($t,"$editMode",r),a=()=>Se(qe,"$dashboardConfig",r),[r,o]=Je();let s,d=null,c=Fe(null),f=L(()=>t()?.tiles||[]);function h(){d&&d.destroy(),!(!s||!n())&&(d=x.create(s,{animation:200,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",handle:".tile",onEnd:y=>{y.oldIndex===void 0||y.newIndex===void 0||S(y.oldIndex,y.newIndex)}}))}function S(y,N){qe.update(I=>{const g=I.views.find(k=>k.id===t()?.id);if(!g)return I;const[_]=g.tiles.splice(y,1);return g.tiles.splice(N,0,_),g.tiles.forEach((k,E)=>k.order=E),pt(I),{...I}})}function w(y){qe.update(N=>{const I=N.views.find(g=>g.id===t()?.id);return I?(I.tiles=I.tiles.filter(g=>g.id!==y),I.tiles.forEach((g,_)=>g.order=_),pt(N),{...N}):N})}function v(y){ae(c,l(c)===y?null:y,!0)}function p(y,N){qe.update(I=>{const g=I.views.find(F=>F.id===t()?.id),_=I.views.find(F=>F.id===N);if(!g||!_||g.id===_.id)return I;const k=g.tiles.findIndex(F=>F.id===y);if(k===-1)return I;const[E]=g.tiles.splice(k,1);return E.order=_.tiles.length,_.tiles.push(E),g.tiles.forEach((F,G)=>F.order=G),pt(I),{...I}}),ae(c,null)}Lt(()=>{n()?setTimeout(h,100):d&&(d.destroy(),d=null)}),zn(()=>{d&&d.destroy()});var D=Xi();let M;var O=b(D);Ce(O,17,()=>l(f),y=>y.id,(y,N)=>{var I=zi(),g=b(I);{let E=L(()=>t()?.name),F=L(()=>n()?()=>w(l(N).id):void 0);mt(g,{get tile(){return l(N)},get zoneName(){return l(E)},get onRemove(){return l(F)}})}var _=A(g,2);{var k=E=>{var F=ji(),G=Pe(F),V=A(G,2),te=A(V,2);{var ee=oe=>{var _e=Fi(),le=b(_e);Ce(le,1,()=>a().views.filter(z=>z.id!==t()?.id),Ve,(z,U)=>{var Q=Ni(),we=b(Q);m(Q),be(()=>fe(we,`${l(U).icon??""}
								${l(U).name??""}`)),$("click",Q,()=>p(l(N).id,l(U).id)),R(z,Q)});var ne=A(le,2);{var ye=z=>{var U=Mi();R(z,U)},T=L(()=>a().views.filter(z=>z.id!==t()?.id).length===0);se(ne,z=>{l(T)&&z(ye)})}m(_e),R(oe,_e)};se(te,oe=>{l(c)===l(N).id&&oe(ee)})}$("click",G,oe=>{oe.stopPropagation(),$n.set(l(N).id)}),$("click",V,()=>v(l(N).id)),R(E,F)};se(_,E=>{n()&&E(k)})}m(I),R(y,I)});var j=A(O,2);{var q=y=>{var N=Ri();$("click",N,()=>Ln.set(!0)),R(y,N)};se(j,y=>{n()&&y(q)})}var H=A(j,2);{var W=y=>{var N=Bi();R(y,N)};se(H,y=>{l(f).length===0&&!n()&&y(W)})}m(D),Zn(D,y=>s=y,()=>s),be(()=>M=Wt(D,1,"tile-grid svelte-4qeep8",null,M,{editing:n()})),R(i,D),Qe(),o()}Ze(["click"]);var Hi=Y('<div class="fav-toggle active svelte-1358jbe" role="button" tabindex="0" title="Aus Favoriten entfernen"><!></div>'),Yi=Y('<button class="room-card svelte-1358jbe"><div class="room-icon svelte-1358jbe"><!></div> <span class="room-name svelte-1358jbe"> </span> <!></button>'),Gi=Y('<section class="rooms-section svelte-1358jbe"><h3 class="section-label svelte-1358jbe">Favoriten</h3> <div class="room-grid svelte-1358jbe"></div></section>'),Li=Y('<div class="fav-toggle svelte-1358jbe" role="button" tabindex="0" title="Zu Favoriten hinzufügen"><!></div>'),Wi=Y('<button class="room-list-item svelte-1358jbe"><div class="room-list-icon svelte-1358jbe"><!></div> <span class="room-list-name svelte-1358jbe"> </span> <!></button>'),$i=Y('<div class="rooms-page svelte-1358jbe"><div class="rooms-heading svelte-1358jbe"><span class="rooms-subtitle svelte-1358jbe">ZUHAUSE</span> <h1 class="rooms-title svelte-1358jbe">Räume</h1></div> <!> <section class="rooms-section svelte-1358jbe"><h3 class="section-label svelte-1358jbe">Alle</h3> <div class="room-list svelte-1358jbe"></div></section></div>');function Vi(i,e){Ke(e,!0);const t=()=>Se(Vn,"$currentTabViews",a),n=()=>Se($t,"$editMode",a),[a,r]=Je();let o=L(()=>t().filter(v=>v.isFavorite)),s=L(()=>[...t()].filter(v=>!v.isFavorite).sort((v,p)=>v.name.localeCompare(p.name)));function d(v){qe.update(p=>{const D=p.views.find(M=>M.id===v);return D&&(D.isFavorite=!D.isFavorite),pt(p),{...p}})}var c=$i(),f=A(b(c),2);{var h=v=>{var p=Gi(),D=A(b(p),2);Ce(D,21,()=>l(o),Ve,(M,O)=>{var j=Yi(),q=b(j),H=b(q);{let g=L(()=>l(O).color||"#888");de(H,{get name(){return l(O).icon},size:48,get color(){return l(g)}})}m(q);var W=A(q,2),y=b(W,!0);m(W);var N=A(W,2);{var I=g=>{var _=Hi(),k=b(_);de(k,{name:"mdi:star",size:16,color:"#e8c840"}),m(_),$("click",_,E=>{E.stopPropagation(),d(l(O).id)}),$("keydown",_,E=>{E.key==="Enter"&&(E.stopPropagation(),d(l(O).id))}),R(g,_)};se(N,g=>{n()&&g(I)})}m(j),be(()=>{ze(q,`color: ${(l(O).color||"#888")??""}`),fe(y,l(O).name)}),$("click",j,()=>e.onSelect(l(O).id,l(O).name)),R(M,j)}),m(D),m(p),R(v,p)};se(f,v=>{l(o).length>0&&v(h)})}var S=A(f,2),w=A(b(S),2);Ce(w,21,()=>l(s),Ve,(v,p)=>{var D=Wi(),M=b(D),O=b(M);{let y=L(()=>l(p).color||"#888");de(O,{get name(){return l(p).icon},size:24,get color(){return l(y)}})}m(M);var j=A(M,2),q=b(j,!0);m(j);var H=A(j,2);{var W=y=>{var N=Li(),I=b(N);de(I,{name:"mdi:star-outline",size:16,color:"#555"}),m(N),$("click",N,g=>{g.stopPropagation(),d(l(p).id)}),$("keydown",N,g=>{g.key==="Enter"&&(g.stopPropagation(),d(l(p).id))}),R(y,N)};se(H,y=>{n()&&y(W)})}m(D),be(()=>{ze(M,`color: ${(l(p).color||"#888")??""}`),fe(q,l(p).name)}),$("click",D,()=>e.onSelect(l(p).id,l(p).name)),R(v,D)}),m(w),m(S),m(c),R(i,c),Qe(),r()}Ze(["click","keydown"]);var Ui=Y('<button class="category-card svelte-qlyw5j"><div class="category-icon svelte-qlyw5j"><!></div> <span class="category-name svelte-qlyw5j"> </span> <span class="category-count svelte-qlyw5j"> </span></button>'),Zi=Y('<section class="categories-section svelte-qlyw5j"><h3 class="section-label svelte-qlyw5j">Favoriten</h3> <div class="category-grid svelte-qlyw5j"></div></section>'),Ki=Y('<button class="category-list-item svelte-qlyw5j"><div class="category-list-icon svelte-qlyw5j"><!></div> <span class="category-list-name svelte-qlyw5j"> </span> <span class="category-list-count svelte-qlyw5j"> </span></button>'),Qi=Y('<div class="categories-page svelte-qlyw5j"><div class="categories-heading svelte-qlyw5j"><span class="categories-subtitle svelte-qlyw5j">ZUHAUSE</span> <h1 class="categories-title svelte-qlyw5j">Kategorien</h1></div> <!> <section class="categories-section svelte-qlyw5j"><h3 class="section-label svelte-qlyw5j">Alle</h3> <div class="category-list svelte-qlyw5j"></div></section></div>');function Ji(i,e){Ke(e,!0);const t=()=>Se(qe,"$dashboardConfig",n),[n,a]=Je();let r=L(()=>Bt.map(w=>{let v=0;for(const p of t().views)for(const D of p.tiles){const M=D.entityId.split(".")[0];w.domains.includes(M)&&v++}return{...w,count:v}}).filter(w=>w.count>0)),o=L(()=>l(r).slice(0,2)),s=L(()=>[...l(r)].sort((w,v)=>w.name.localeCompare(v.name)));var d=Qi(),c=A(b(d),2);{var f=w=>{var v=Zi(),p=A(b(v),2);Ce(p,21,()=>l(o),Ve,(D,M)=>{var O=Ui(),j=b(O),q=b(j);de(q,{get name(){return l(M).icon},size:48,get color(){return l(M).color}}),m(j);var H=A(j,2),W=b(H,!0);m(H);var y=A(H,2),N=b(y,!0);m(y),m(O),be(()=>{ze(j,`color: ${l(M).color??""}`),fe(W,l(M).name),fe(N,l(M).count)}),$("click",O,()=>e.onSelect(l(M).id,l(M).name)),R(D,O)}),m(p),m(v),R(w,v)};se(c,w=>{l(o).length>0&&w(f)})}var h=A(c,2),S=A(b(h),2);Ce(S,21,()=>l(s),Ve,(w,v)=>{var p=Ki(),D=b(p),M=b(D);de(M,{get name(){return l(v).icon},size:28,get color(){return l(v).color}}),m(D);var O=A(D,2),j=b(O,!0);m(O);var q=A(O,2),H=b(q,!0);m(q),m(p),be(()=>{ze(D,`color: ${l(v).color??""}`),fe(j,l(v).name),fe(H,l(v).count)}),$("click",p,()=>e.onSelect(l(v).id,l(v).name)),R(w,p)}),m(S),m(h),m(d),R(i,d),Qe(),a()}Ze(["click"]);var ea=Y('<meta name="description" content="Ein von Loxone inspiriertes Home Assistant Dashboard"/>'),ta=Y('<div class="empty-state svelte-1uha8ag">Keine Entitäten in dieser Kategorie</div>'),na=Y('<div class="detail-header svelte-1uha8ag"><button class="back-btn svelte-1uha8ag" aria-label="Zurück"><!></button> <h2 class="detail-title svelte-1uha8ag"> </h2></div> <div class="category-tiles svelte-1uha8ag"><div class="tile-grid svelte-1uha8ag"></div> <!></div>',1),ia=Y('<div class="room-category-section svelte-1uha8ag"><div class="room-category-header svelte-1uha8ag"><span class="room-category-name svelte-1uha8ag"> </span> <!></div> <div class="tile-grid svelte-1uha8ag"></div></div>'),aa=Y(`<div class="empty-state svelte-1uha8ag">Keine Entitäten in diesem Raum. Füge Geräte über den
				Bearbeitungsmodus hinzu.</div>`),ra=Y('<div class="room-detail svelte-1uha8ag"><div class="room-detail-header svelte-1uha8ag"><button class="back-btn svelte-1uha8ag" aria-label="Zurück"><!></button> <div class="room-detail-title-area svelte-1uha8ag"><span class="room-detail-subtitle svelte-1uha8ag">ZUHAUSE</span> <h2 class="room-detail-name svelte-1uha8ag"> </h2></div></div> <!></div>'),oa=Y(`<div class="empty-state svelte-1uha8ag">Keine Entitäten mit dem Label "Zentral" gefunden. Weise
					Entitäten in Home Assistant das Label "Zentral" zu.</div>`),la=Y('<div class="central-header svelte-1uha8ag"><div class="central-title-row svelte-1uha8ag"><span class="central-icon svelte-1uha8ag"><!></span> <h2 class="detail-title svelte-1uha8ag"> </h2></div></div> <div class="central-tiles svelte-1uha8ag"><div class="tile-grid svelte-1uha8ag"></div> <!></div>',1),sa=Y(`<div class="central-setup svelte-1uha8ag"><div class="central-setup-header svelte-1uha8ag"><span class="central-setup-icon svelte-1uha8ag"><!></span> <h2 class="central-setup-title svelte-1uha8ag">Zentrale einrichten</h2> <p class="central-setup-desc svelte-1uha8ag">Weise in Home Assistant Entitäten das Label "Zentral" zu, um
					sie hier anzuzeigen. Starte dann die Auto-Erkennung erneut.</p></div></div>`);function ha(i,e){Ke(e,!0);const t=()=>Se(Un,"$activeTab",r),n=()=>Se(qe,"$dashboardConfig",r),a=()=>Se(nn,"$activeViewId",r),[r,o]=Je();let s=Fe(!1),d=Fe(""),c=Fe(!1),f=Fe("");function h(g,_){t()==="categories"?(ae(f,g,!0),ae(d,_,!0),ae(c,!0),ae(s,!0)):(nn.set(g),ae(d,_,!0),ae(s,!0),ae(c,!1))}function S(){ae(s,!1),ae(c,!1),ae(f,"")}Lt(()=>{t(),ae(s,!1),ae(c,!1)});let w=L(()=>()=>{if(!l(c)||!l(f))return[];const g=Bt.find(k=>k.id===l(f));if(!g)return[];const _=[];for(const k of n().views)for(const E of k.tiles){const F=E.entityId.split(".")[0];g.domains.includes(F)&&_.push(E)}return _}),v=L(()=>n().settings?.centralViewId||""),p=L(()=>n().views.find(g=>g.id===l(v))),D=L(()=>n().views.find(g=>g.id===a()));function M(){if(!l(D))return[];const g=[];for(const _ of Bt){const k=l(D).tiles.filter(E=>{const F=E.entityId.split(".")[0];return _.domains.includes(F)});k.length>0&&g.push({category:_,tiles:k})}return g}let O=L(M);var j=ct();Kn("1uha8ag",g=>{var _=ea();Rn(()=>{Bn.title="LoxHome Dashboard"}),R(g,_)});var q=Pe(j);{var H=g=>{var _=ct(),k=Pe(_);{var E=G=>{Vi(G,{onSelect:h})},F=G=>{Ji(G,{onSelect:h})};se(k,G=>{t()==="rooms"?G(E):G(F,!1)})}R(g,_)},W=g=>{var _=na(),k=Pe(_),E=b(k),F=b(E);de(F,{name:"mdi:chevron-left",size:24}),m(E);var G=A(E,2),V=b(G,!0);m(G),m(k);var te=A(k,2),ee=b(te);Ce(ee,21,()=>l(w)(),ne=>ne.id,(ne,ye)=>{mt(ne,{get tile(){return l(ye)},get zoneName(){return l(d)}})}),m(ee);var oe=A(ee,2);{var _e=ne=>{var ye=ta();R(ne,ye)},le=L(()=>l(w)().length===0);se(oe,ne=>{l(le)&&ne(_e)})}m(te),be(()=>fe(V,l(d))),$("click",E,S),R(g,_)},y=g=>{var _=ra(),k=b(_),E=b(k),F=b(E);de(F,{name:"mdi:chevron-left",size:24}),m(E);var G=A(E,2),V=A(b(G),2),te=b(V,!0);m(V),m(G),m(k);var ee=A(k,2);{var oe=le=>{var ne=ct(),ye=Pe(ne);Ce(ye,17,()=>l(O),Ve,(T,z)=>{var U=ia(),Q=b(U),we=b(Q),He=b(we,!0);m(we);var kn=A(we,2);de(kn,{name:"mdi:chevron-right",size:18,color:"var(--text-muted)"}),m(Q);var Qt=A(Q,2);Ce(Qt,21,()=>l(z).tiles,It=>It.id,(It,An)=>{mt(It,{get tile(){return l(An)},get zoneName(){return l(d)}})}),m(Qt),m(U),be(()=>fe(He,l(z).category.name)),R(T,U)}),R(le,ne)},_e=le=>{var ne=aa();R(le,ne)};se(ee,le=>{l(D)&&l(D).tiles.length>0?le(oe):le(_e,!1)})}m(_),be(()=>fe(te,l(d))),$("click",E,S),R(g,_)},N=g=>{var _=ct(),k=Pe(_);{var E=G=>{var V=la(),te=Pe(V),ee=b(te),oe=b(ee),_e=b(oe);de(_e,{get name(){return l(p).icon},size:28}),m(oe);var le=A(oe,2),ne=b(le,!0);m(le),m(ee),m(te);var ye=A(te,2),T=b(ye);Ce(T,21,()=>l(p).tiles,Q=>Q.id,(Q,we)=>{mt(Q,{get tile(){return l(we)},zoneName:"Zentral"})}),m(T);var z=A(T,2);{var U=Q=>{var we=oa();R(Q,we)};se(z,Q=>{l(p).tiles.length===0&&Q(U)})}m(ye),be(()=>fe(ne,l(p).name)),R(G,V)},F=G=>{var V=sa(),te=b(V),ee=b(te),oe=b(ee);de(oe,{name:"mdi:home",size:40,color:"var(--accent)"}),m(ee),Xn(4),m(te),m(V),R(G,V)};se(k,G=>{l(v)&&l(p)?G(E):G(F,!1)})}R(g,_)},I=g=>{qi(g,{})};se(q,g=>{(t()==="rooms"||t()==="categories")&&!l(s)?g(H):t()==="categories"&&l(c)?g(W,1):t()==="rooms"&&l(s)?g(y,2):t()==="central"?g(N,3):g(I,!1)})}R(i,j),Qe(),o()}Ze(["click"]);export{ha as component};
